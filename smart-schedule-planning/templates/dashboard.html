<!-- dashboard.html - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π -->
{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h1>–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h1>
        <p class="welcome-message">
            –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user_name }}! üëã
        </p>
        <div class="current-date">
            {{ current_date|default('', true) }}
        </div>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon total">
                <i class="fas fa-tasks"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.total|default(0) }}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon completed">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.completed|default(0) }}</div>
                <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon progress">
                <i class="fas fa-spinner"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.in_progress|default(0) }}</div>
                <div class="stat-label">–í —Ä–∞–±–æ—Ç–µ</div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon new">
                <i class="fas fa-plus-circle"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.new|default(0) }}</div>
                <div class="stat-label">–ù–æ–≤—ã–µ</div>
            </div>
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="card">
            <div class="card-header">
                <h2>–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏</h2>
                <a href="{{ url_for('task.task_list') }}" class="btn btn-outline btn-sm">
                    –í—Å–µ –∑–∞–¥–∞—á–∏
                </a>
            </div>
            <div class="card-body">
                {% if upcoming_tasks %}
                    {% for task in upcoming_tasks %}
                    <div class="task-item">
                        <div class="task-title">{{ task.title }}</div>
                        <div class="task-meta">
                            <span class="badge priority-{{ task.priority }}">{{ task.priority }}</span>
                            <span class="deadline">{{ task.deadline|datetime_format if task.deadline else '–ù–µ—Ç –¥–µ–¥–ª–∞–π–Ω–∞' }}</span>
                            <span class="status status-{{ task.status }}">{{ task.status }}</span>
                        </div>
                        <div class="task-actions">
                            <a href="{{ url_for('task.task_detail', task_id=task.id) }}" 
                               class="btn btn-xs btn-outline">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <p class="text-muted">–ù–µ—Ç –±–ª–∏–∂–∞–π—à–∏—Ö –∑–∞–¥–∞—á</p>
                {% endif %}
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            </div>
            <div class="card-body">
                <div class="quick-actions">
                    <a href="{{ url_for('task.create_task') }}" class="quick-action-btn">
                        <i class="fas fa-plus"></i>
                        <span>–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</span>
                    </a>
                    <a href="{{ url_for('calendar.calendar_view') }}" class="quick-action-btn">
                        <i class="fas fa-calendar"></i>
                        <span>–û—Ç–∫—Ä—ã—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å</span>
                    </a>
                    <a href="{{ url_for('planning.collaborative') }}" class="quick-action-btn">
                        <i class="fas fa-users"></i>
                        <span>–°–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É</span>
                    </a>
                    <a href="{{ url_for('report.reports') }}" class="quick-action-btn">
                        <i class="fas fa-chart-bar"></i>
                        <span>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç—á–µ—Ç—ã</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}